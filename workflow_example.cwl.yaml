#!/usr/bin/env cwl-runner
cwlVersion: v1.2
class: Workflow

inputs:
  input_file_1.json:
    type: File
  parameter.py:
    type: File
  config.yaml:
    type: File

outputs:
    - id: wf_output
      type: File
      outputSource: end_task/output.csv
    - id: wf_output_2
      type: File
      outputSource: init_task/initialized_dataset.json

steps:
  init_task:
    in:
      input_file: input_file_1.json
      config : config.yaml
    out:
    - initialized_dataset.json
    run: init_task.py
  inter_task_1:
    in:
      input_inter_1: init_task/initialized_dataset.json
      parameter: parameter.py
    out:
    - output_inter_1
    run: inter_task_1.py
  inter_task_2:
    in:
      input_inter_1: init_task/initialized_dataset.json
    out:
    - output_inter_2
    run: inter_task_2
  end_task:
    in:
      input_end_1: inter_task_1/output_inter_1
      input_end_2: inter_task_2/output_inter_2
      param: parameter.py
    out:
    - output.csv
    run: end_task.js
